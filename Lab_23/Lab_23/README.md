# Lab 23 — ISP & DIP, Dependency Injection

## Опис лабораторної роботи

**Тема:** Застосування принципів **ISP (Interface Segregation Principle)** та **DIP (Dependency Inversion Principle)** з використанням **Dependency Injection (DI)** через конструктор.

**Мета роботи:**

* Виявити порушення ISP та DIP у початковій реалізації.
* Виконати рефакторинг із розділенням інтерфейсів.
* Реалізувати впровадження залежностей через конструктор.
* Продемонструвати коректну роботу системи після змін.

---

##  Обраний варіант

**Варіант 4 — MultiFunctionPrinter (друк, сканування, факс)**

Початковий клас `SmartMachine`:

* Вміє **друкувати, сканувати та надсилати факс**.
* **Сам створює** всі модулі → порушення **DIP**.
* Використовує **"товстий" інтерфейс** із зайвими методами → порушення **ISP**.

---

##  Аналіз початкової реалізації

### Порушення ISP

Інтерфейс змушує клієнтів залежати від методів, які вони можуть **не використовувати**:

* Пристрій, що лише друкує, все одно має реалізовувати `Scan()` і `Fax()`.

### Порушення DIP

* Клас високого рівня `SmartMachine` **напряму створює**:

  * `PrinterModule`
  * `ScannerModule`
  * `FaxModule`
* Неможливо легко:

  * замінити реалізацію
  * протестувати окремі частини
  * підключити інші модулі

---

##  Рефакторинг рішення

### 1. Застосування ISP

Інтерфейс розділено на вузькі:

* `IPrinter`
* `IScanner`
* `IFax`

Тепер кожен клас реалізує **лише потрібну функціональність**.

### 2. Застосування DIP

* `SmartMachineRefactored` залежить **від інтерфейсів**, а не від конкретних класів.
* Залежності **передаються через конструктор** (Dependency Injection).

```csharp
public SmartMachineRefactored(IPrinter printer, IScanner scanner, IFax fax)
```

Це забезпечує:

* слабку зв’язаність
* гнучкість
* просте тестування

---

##  Демонстрація роботи

У `Main()` показано:

1. **Стару реалізацію** з порушеннями ISP/DIP.
2. **Нову реалізацію**:

   * ручна конфігурація залежностей
   * передача їх у конструктор
   * коректна робота без порушень SOLID.

---

##  Структура проєкту

```
lab23/
 ├── Program.cs
 └── README.md
```

---

##  Запуск проєкту

1. Відкрити папку **lab23** у Visual Studio або VS Code.
2. Переконатися, що встановлено **.NET SDK**.
3. Виконати в терміналі:

```bash
dotnet run
```

---

##  Висновки

* **ISP** допомагає уникнути залежності від зайвих методів.
* **DIP** зменшує зв’язаність між модулями.
* **Dependency Injection** робить систему гнучкою та тестованою.
* Дотримання **SOLID‑принципів** значно покращує якість архітектури програм.

---
